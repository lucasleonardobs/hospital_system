<div fxFlex fxLayout="row wrap">
  <form
    fxFlex
    #patientRegisterForm="ngForm"
    fxLayout="column"
    (ngSubmit)="onSubmit()"
  >
    <h1 style="align-self: flex-start">Marcação de Exame</h1>
    
    <mat-form-field appearance="outline">
      <mat-label>Pesquisar Paciente por CPF</mat-label>
      <input
        matInput
        placeholder="Digite o CPF..."
        [(ngModel)]="cpf"
        name="cpf"
        required
      />
    </mat-form-field>
    <button
      (click)="togglePatientFound()"
      mat-raised-button
      style="width: 100px"
      color="primary"
      type="button"
    >
      Pesquisar
    </button>
  
    <div style="padding-top: 30px;"*ngIf="patientFound">
      <div >
        <mat-form-field appearance="outline">
        <mat-label>Nome</mat-label>
        <input matInput disabled value='Antonio Forgeras'>
        </mat-form-field>
  
        <mat-form-field appearance="outline">
        <mat-label>CPF</mat-label>
        <input matInput disabled value='123.213.512-12'>
        </mat-form-field>
  
        <mat-form-field appearance="outline">
        <mat-label>Data de Nascimento</mat-label>
        <input matInput disabled value='23/12/2002'>
        </mat-form-field>
  
        <mat-form-field appearance="outline">
        <mat-label>Telefone</mat-label>
        <input matInput disabled value='(81) 9 8457-9127'>
        </mat-form-field>
  
      </div>
      <mat-form-field appearance="outline" style="margin-top: 1rem">
        <mat-label>Exame</mat-label>
        <mat-select required  #typeExams (selectionChange)="setSelectedExam($event)">
          <mat-option *ngFor="let exam of exams" [value]="exam.id">
            {{ exam.label }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" style="margin-top: 1rem">
        <mat-label>Médico</mat-label>
        <mat-select required [disabled]="!selectedExamId" #typeDoctors (selectionChange)="setSelectedDoctorId($event)">
          <mat-option *ngFor="let doctor of doctors[selectedExamId]" [value]="doctor.id">
            {{ doctor.label }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field>
        <input
          matInput
          readonly
          required
          [ngxMatDatetimePicker]="picker"
          placeholder="Dia/Horário"
          [(ngModel)]="scheduledDate"
          name="scheduledDate"
          [ngModelOptions]="{ standalone: true }"
        />

        <mat-datepicker-toggle
          matSuffix
          [for]="$any(picker)"
        ></mat-datepicker-toggle>
        <ngx-mat-datetime-picker #picker></ngx-mat-datetime-picker>
      </mat-form-field>

      <div class="footer-buttons" style="margin-top: 1rem">
        <button mat-raised-button color="primary" type="submit">
          Confirmar
        </button>
        <button
          class="cancel-btn"
          mat-raised-button
          color="warn"
          type="button"
          (click)="closeDialog()"
        >
          Cancelar
        </button>
      </div>
    </div>
  </form>
</div>
